<div class="admin-applications">
  <div class="page-header">
    <h1>Application Management</h1>
    <button class="btn-back" routerLink="/admin">‚Üê Back to Dashboard</button>
  </div>

  <div class="applications-container">
    <div class="table-header">
      <h2>All Applications</h2>
      <div class="filters">
        <select [(ngModel)]="filterStatus" class="status-filter">
          <option value="all">All Status</option>
          <option value="pending">Pending</option>
          <option value="approved">Approved</option>
          <option value="rejected">Rejected</option>
        </select>
        <div class="app-count">Total: {{ filteredApplications.length }}</div>
      </div>
    </div>

    <div *ngIf="loading" class="loading">
      <div class="spinner"></div>
      <p>Loading applications...</p>
    </div>

    <div class="table-container" *ngIf="!loading">
      <table class="applications-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Type</th>
            <th>Amount</th>
            <th>Status</th>
            <th>Date</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let app of filteredApplications">
            <td>{{ app.id }}</td>
            <td>{{ app.first_name }} {{ app.last_name }}</td>
            <td>{{ app.email }}</td>
            <td>{{ app.phone }}</td>
            <td>
              <span class="type-badge" [class.double]="app.application_type === 'double'">
                {{ app.application_type | titlecase }}
              </span>
            </td>
            <td>${{ app.amount }}</td>
            <td>
              <span class="status-badge" 
                    [class.pending]="app.status === 'pending'"
                    [class.approved]="app.status === 'approved'"
                    [class.rejected]="app.status === 'rejected'">
                {{ app.status | titlecase }}
              </span>
            </td>
            <td>{{ app.created_at | date:'short' }}</td>
            <td class="actions">
              <select (change)="updateApplicationStatus(app.id, $any($event.target).value)" 
                      [value]="app.status" class="status-select">
                <option value="pending">Pending</option>
                <option value="approved">Approved</option>
                <option value="rejected">Rejected</option>
              </select>
              <button class="btn-delete" (click)="deleteApplication(app.id)">
                Delete
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>