<div class="application-container">
  <h2>Single Family Membership Application</h2>
  
  <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="application-form">
    
    <!-- Personal Information -->
    <div class="form-section">
      <h3>Personal Information</h3>
      
      <div class="form-row">
        <div class="form-group">
          <label>First Name *</label>
          <input type="text" formControlName="firstName" placeholder="Enter first name">
          <div class="error" *ngIf="registrationForm.get('firstName')?.invalid && registrationForm.get('firstName')?.touched">
            First name is required
          </div>
        </div>
        
        <div class="form-group">
          <label>Middle Name</label>
          <input type="text" formControlName="middleName" placeholder="Enter middle name">
        </div>
        
        <div class="form-group">
          <label>Last Name *</label>
          <input type="text" formControlName="lastName" placeholder="Enter last name">
          <div class="error" *ngIf="registrationForm.get('lastName')?.invalid && registrationForm.get('lastName')?.touched">
            Last name is required
          </div>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label>Email Address *</label>
          <input type="email" formControlName="email" placeholder="Enter email address">
          <div class="error" *ngIf="registrationForm.get('email')?.invalid && registrationForm.get('email')?.touched">
            Valid email is required
          </div>
        </div>
        
        <div class="form-group">
          <label>Phone Main *</label>
          <input type="tel" formControlName="phoneMain" placeholder="Enter phone number">
          <div class="error" *ngIf="registrationForm.get('phoneMain')?.invalid && registrationForm.get('phoneMain')?.touched">
            Phone number is required
          </div>
        </div>
      </div>
    </div>

    <!-- Address Information -->
    <div class="form-section">
      <h3>Address Information</h3>
      
      <div class="form-group">
        <label>Address *</label>
        <input type="text" formControlName="address1" placeholder="Enter address">
        <div class="error" *ngIf="registrationForm.get('address1')?.invalid && registrationForm.get('address1')?.touched">
          Address is required
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label>City *</label>
          <input type="text" formControlName="city" placeholder="Enter city">
          <div class="error" *ngIf="registrationForm.get('city')?.invalid && registrationForm.get('city')?.touched">
            City is required
          </div>
        </div>
        
        <div class="form-group">
          <label>State *</label>
          <input type="text" formControlName="stateProvince" placeholder="Enter state">
          <div class="error" *ngIf="registrationForm.get('stateProvince')?.invalid && registrationForm.get('stateProvince')?.touched">
            State is required
          </div>
        </div>
        
        <div class="form-group">
          <label>Zip Code *</label>
          <input type="text" formControlName="zip" placeholder="Enter zip code">
          <div class="error" *ngIf="registrationForm.get('zip')?.invalid && registrationForm.get('zip')?.touched">
            Zip code is required
          </div>
        </div>
      </div>
    </div>

    <!-- Family Information -->
    <div class="form-section">
      <h3>Family Information</h3>
      
      <div class="form-row">
        <div class="form-group">
          <label>Spouse / Next of Kin</label>
          <input type="text" formControlName="spouse" placeholder="Enter spouse name">
        </div>
        
        <div class="form-group">
          <label>Contact Phone (Spouse)</label>
          <input type="tel" formControlName="spousePhone" placeholder="Enter spouse phone">
        </div>
      </div>
      
      <div class="form-group">
        <label>Authorized Representative</label>
        <input type="text" formControlName="authorizedRep" placeholder="Enter authorized representative">
      </div>
      
      <!-- Children -->
      <div class="form-row">
        <div class="form-group">
          <label>Child 1</label>
          <input type="text" formControlName="child1" placeholder="Enter child name">
        </div>
        
        <div class="form-group">
          <label>Child 2</label>
          <input type="text" formControlName="child2" placeholder="Enter child name">
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label>Child 3</label>
          <input type="text" formControlName="child3" placeholder="Enter child name">
        </div>
        
        <div class="form-group">
          <label>Child 4</label>
          <input type="text" formControlName="child4" placeholder="Enter child name">
        </div>
      </div>
      
      <div class="form-group">
        <label>Child 5</label>
        <input type="text" formControlName="child5" placeholder="Enter child name">
      </div>
      
      <!-- Parents -->
      <div class="form-row">
        <div class="form-group">
          <label>Parent 1</label>
          <input type="text" formControlName="parent1" placeholder="Enter parent name">
        </div>
        
        <div class="form-group">
          <label>Parent 2</label>
          <input type="text" formControlName="parent2" placeholder="Enter parent name">
        </div>
      </div>
      
      <!-- Spouse Parents -->
      <div class="form-row">
        <div class="form-group">
          <label>Spouse Parent 1</label>
          <input type="text" formControlName="spouseParent1" placeholder="Enter spouse parent name">
        </div>
        
        <div class="form-group">
          <label>Spouse Parent 2</label>
          <input type="text" formControlName="spouseParent2" placeholder="Enter spouse parent name">
        </div>
      </div>
      
      <!-- Siblings -->
      <div class="form-row">
        <div class="form-group">
          <label>Sibling 1</label>
          <input type="text" formControlName="sibling1" placeholder="Enter sibling name">
        </div>
        
        <div class="form-group">
          <label>Sibling 2</label>
          <input type="text" formControlName="sibling2" placeholder="Enter sibling name">
        </div>
      </div>
    </div>

    <!-- Identification Document -->
    <div class="form-section">
      <h3>Identification Document</h3>
      
      <div class="form-group">
        <label>Minnesota ID or Any Valid Identification Card *</label>
        <input type="file" (change)="handleFileInput($event)" accept="image/*,.pdf" class="file-input">
        <div class="file-upload-info">
          <p>ðŸ“„ Please upload a clear photo or scan of your Minnesota ID or any valid government-issued identification card.</p>
          <p><small>Accepted formats: JPG, PNG, PDF (Max size: 5MB)</small></p>
        </div>
        <div class="error" *ngIf="!fileToUpload && registrationForm.get('declarationAccepted')?.touched">
          Identification document is required
        </div>
      </div>
    </div>

    <!-- Agreement -->
    <div class="form-section">
      <div class="checkbox-group">
        <label class="checkbox-label">
          <input type="checkbox" formControlName="declarationAccepted">
          <span class="checkmark"></span>
          I have read the Pamoja Constitution and agree to the conditions listed above *
        </label>
        <div class="error" *ngIf="registrationForm.get('declarationAccepted')?.invalid && registrationForm.get('declarationAccepted')?.touched">
          You must agree to the constitution
        </div>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="form-actions">
      <button type="submit" class="submit-btn" [disabled]="registrationForm.invalid || isLoading" [class.loading]="isLoading">
        <span *ngIf="!isLoading">Submit Application</span>
        <span *ngIf="isLoading">Submitting...</span>
      </button>
    </div>
    
    <!-- Message Display -->
    <div *ngIf="message" class="message" [class.success]="message.includes('successful')" [class.error]="!message.includes('successful')">
      {{ message }}
    </div>
  </form>
  
  <!-- Success Animation -->
  <app-success-animation 
    [show]="showSuccess" 
    [message]="successMessage"
    (complete)="onSuccessComplete()">
  </app-success-animation>
</div>